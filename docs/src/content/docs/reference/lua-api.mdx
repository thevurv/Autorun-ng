---
title: Lua API
description: A reference to Autorun's Lua API
---

import { Aside, Card, Code, Tabs, TabItem } from '@astrojs/starlight/components';
import apiData from '../../../../../packages/autorun-env/api.json';

export function formatType(type) {
    return type;
}

export function formatParameters(params) {
    if (!params || params.length === 0) return '';
    return params.map(p => `${p.name}: ${p.type}`).join(', ');
}

export function formatReturns(returns) {
    if (!returns || returns.length === 0) return 'void';
    return returns.map(r => r.type).join(', ');
}

{apiData.namespaces.map(namespace => (
  <div key={namespace.name}>
    <h2>Namespace <code>{namespace.name}</code></h2>
    <p>{namespace.description}</p>

    {namespace.fields && namespace.fields.length > 0 && (
      <>
        <h3>Fields</h3>
        {namespace.fields.map((field, index) => (
          <div key={field.name}>
            <h4><code>{namespace.name}.{field.name}</code></h4>
            <Code code={`${namespace.name}.${field.name}: ${field.type}`} lang="lua" />
            <p>{field.description}</p>
            {index < namespace.fields.length - 1 && <hr style={{ margin: '2rem 0' }} />}
          </div>
        ))}
      </>
    )}

    {namespace.functions && namespace.functions.length > 0 && (
      <>
        <h3>Functions</h3>
        {namespace.functions.map(func => (
          <div key={func.name}>
            <h4><code>{func.name}</code></h4>
            <Code
              code={`${namespace.name}.${func.name}(${formatParameters(func.parameters)}): ${formatReturns(func.returns)}`}
              lang="lua"
            />
            <p>{func.description}</p>

            {func.parameters && func.parameters.length > 0 && (
              <>
                <p><strong>Parameters:</strong></p>
                <ul>
                  {func.parameters.map((param, i) => (
                    <li key={i}>
                      <code>{param.name}: {param.type}</code>
                      {param.description && ` - ${param.description}`}
                    </li>
                  ))}
                </ul>
              </>
            )}

            {func.returns && func.returns.length > 0 && (
              <>
                <p><strong>Returns:</strong></p>
                <ul>
                  {func.returns.map((ret, i) => (
                    <li key={i}>
                      <code>{ret.type}</code>
                      {ret.description && ` - ${ret.description}`}
                    </li>
                  ))}
                </ul>
              </>
            )}

            <hr style={{ margin: '2rem 0' }} />
          </div>
        ))}
      </>
    )}
  </div>
))}

{apiData.classes && apiData.classes.map(cls => (
  <div key={cls.name}>
    <h2>Class <code>{cls.name}</code></h2>
    <p>{cls.description}</p>

    {cls.fields && cls.fields.length > 0 && (
      <>
        <h3>Fields</h3>
        {cls.fields.map((field, index) => (
          <div key={field.name}>
            <h4><code>{field.name}</code></h4>
            <Code code={`${cls.name}.${field.name}: ${field.type}`} lang="lua" />
            <p>{field.description}</p>
            {index < cls.fields.length - 1 && <hr style={{ margin: '2rem 0' }} />}
          </div>
        ))}
      </>
    )}

    {cls.methods && cls.methods.length > 0 && (
      <>
        <h3>Methods</h3>
        {cls.methods.map(method => (
          <div key={method.name}>
            <h4><code>{method.name}</code></h4>
            <Code
              code={`${cls.name}:${method.name}(${formatParameters(method.parameters)}): ${formatReturns(method.returns)}`}
              lang="lua"
            />
            <p>{method.description}</p>

            {method.parameters && method.parameters.length > 0 && (
              <>
                <p><strong>Parameters:</strong></p>
                <ul>
                  {method.parameters.map((param, i) => (
                    <li key={i}>
                      <code>{param.name}</code> (<code>{param.type}</code>)
                      {param.description && ` - ${param.description}`}
                    </li>
                  ))}
                </ul>
              </>
            )}

            {method.returns && method.returns.length > 0 && (
              <>
                <p><strong>Returns:</strong></p>
                <ul>
                  {method.returns.map((ret, i) => (
                    <li key={i}>
                      <code>{ret.type}</code>
                      {ret.description && ` - ${ret.description}`}
                    </li>
                  ))}
                </ul>
              </>
            )}

            <hr style={{ margin: '2rem 0' }} />
          </div>
        ))}
      </>
    )}
  </div>
))}
