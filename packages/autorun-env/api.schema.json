{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Autorun API Specification",
	"description": "Schema for defining the Autorun-ng Lua API",
	"type": "object",
	"properties": {
		"namespaces": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/namespace"
			}
		},
		"classes": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/class"
			}
		},
		"events": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/event"
			}
		}
	},
	"required": ["namespaces"],
	"definitions": {
		"namespace": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string",
					"description": "Name of the namespace (e.g., 'Autorun')"
				},
				"description": {
					"type": "string",
					"description": "Description of the namespace"
				},
				"realm": {
					"type": "string",
					"enum": ["menu", "shared", "client"],
					"description": "Which realm(s) the namespace is available in"
				},
				"fields": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/field"
					}
				},
				"functions": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/function"
					}
				}
			},
			"required": ["name", "realm"]
		},
		"field": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				},
				"type": {
					"type": "string",
					"description": "Lua type (e.g., 'string', 'userdata', 'number')"
				},
				"description": {
					"type": "string"
				},
				"realm": {
					"type": "string",
					"enum": ["menu", "shared", "client"],
					"description": "Which realm(s) the field is available in"
				}
			},
			"required": ["name", "type", "realm"]
		},
		"function": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				},
				"description": {
					"type": "string"
				},
				"realm": {
					"type": "string",
					"enum": ["menu", "shared", "client"],
					"description": "Which realm(s) the function is available in"
				},
				"parameters": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/parameter"
					}
				},
				"returns": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/returnValue"
					}
				}
			},
			"required": ["name", "realm"]
		},
		"parameter": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				},
				"type": {
					"type": "string",
					"description": "Lua type or variadic (...)"
				},
				"description": {
					"type": "string"
				},
				"default": {
					"type": "string",
					"default": null
				}
			},
			"required": ["name", "type"]
		},
		"returnValue": {
			"type": "object",
			"properties": {
				"type": {
					"type": "string"
				},
				"description": {
					"type": "string"
				}
			},
			"required": ["type"]
		},
		"class": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string",
					"description": "Name of the class (e.g., 'EventHandler')"
				},
				"description": {
					"type": "string",
					"description": "Description of the class"
				},
				"realm": {
					"type": "string",
					"enum": ["menu", "shared", "client"],
					"description": "Which realm(s) the class is available in"
				},
				"fields": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/field"
					}
				},
				"methods": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/function"
					}
				}
			},
			"required": ["name", "realm"]
		},
		"event": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string",
					"description": "Name of the event (e.g., 'loadbuffer')"
				},
				"description": {
					"type": "string",
					"description": "Description of when and why the event is triggered"
				},
				"realm": {
					"type": "string",
					"enum": ["menu", "shared", "client"],
					"description": "Which realm(s) the event is available in"
				},
				"parameters": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/parameter"
					},
					"description": "Parameters passed to the event callback"
				},
				"returns": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/returnValue"
					},
					"description": "Values that can be returned from the event callback to modify behavior"
				}
			},
			"required": ["name", "realm"]
		}
	}
}
